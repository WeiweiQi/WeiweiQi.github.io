---
title: 持续交付-发布可靠软件的系统方法 读书笔记
comments: true
abbrlink: 42aa
date: 2019-02-18 18:33:36
categories:
tags:
---



本书讲述如何实现更快、更可靠、低成本的自动化软件交付，描述了如何通过增加反馈，并改进开发人员、测试人员、运维人员和项目经理之间的协作来达到这个目标。本书由三部分组成。第一部分阐述了持续交付背后的一些原则，以及支持这些原则的实践。第二部分是本书的核心，全面讲述了部署流水线。第三部分围绕部署流水线的投入阐述讨论了更多细节，包括增量开发技术、高级版本控制模式，以及基础设施、环境和数据的管理和组织治理。

<!-- more -->

## 译者序

- **本书要解决的问题**：软件开发的“最后一公里问题”：如何让软件从“开发完成”迅速实现“上线发布”。

## 马丁·福勒. 序
> 马丁·福勒 作品
马丁·福勒. 分析模式---可重用对象模型. Addison-Wesley. ISBN 0-201-89542-0.
马丁·福勒; Kent Beck. 规划极限编程. Addison-Wesley. ISBN 0-201-71091-9.
马丁·福勒. UML精粹---标准对象建模语言简明指南（第三版）. Addison-Wesley. ISBN 0-321-19368-7.
马丁·福勒; Kent Beck,John Brant,William Opdyke,and Don Roberts. 重构---改善既有代码的设计. Addison-Wesley. ISBN 0-201-48567-2.
马丁·福勒; David Rice,Matthew Foemmel,Edward Hieatt,Robert Mee,以及Randy Stafford. 企业应用架构模式. Addison-Wesley. ISBN 0-321-12742-0(2003年Jolt生产力大奖).

- 本书告诉你如何做到无压力且频繁地交付软件

## 前言

- 软件发布应该是一个快速且可重复的过程。本书会告诉你如何做到这一点。
- 从“决定做某种修改”到“该修改结果正式上线”的这段时间称为 **周期时间**。对任何项目而言，它都是极为重要的度量标准。
- 创建一个完全自动化、可重复且可靠的过程，让变更顺利经过构建、部署、测试和发布过程。自动化是关键。
- **本书将讲述如何缩短从想法到商业价值实现的世界，并使之更安全，从而彻底改变软件交付方式**
- 我们的目标是改变软件交付方式，将其由开发人员的手工操作变成一种可靠、可预期、可视化的过程并在很大程度上实现了自动化的流程，而且它要具备易于理解与风险可量化的特点。使用本书所描述的方法，就有可能在几分钟或几个小时内把一个想法变成可交付到生产环境中的工作代码，而且同时还能提高交付软件的质量。
- 交付成功软件的成本绝大部分都是在首次发布后产生的。这些成本包括技术支持、维护、增加新功能和修复缺陷的成本。
- 书中描述的所有技术都与交付软件新版本给客户相关，旨在减少时间和降低风险。这些技术的核心是增加反馈，改进负责交付的开发、测试和运维人员之间的协作。

> 敏捷宣言的第一原则：我们的首要任务是尽早持续交付有价值的软件并让客户满意。

### 读者对象及本书内容

- 本书的一个主要目标是改善负责软件交付的相关人员之间的协作，尤其是开发人员、测试人员、系统和数据库管理员以及经理。
- 本书内容包括经常提到的配置管理、源代码控制、发布计划、审计、符合性和集成，以及构建、测试和部署流程的自动化。也会讲述自动化验收测试、依赖管理、数据库迁移，以及测试和生产环境的创建与管理等技术。将各个方面融合在一起。
- 我们的目标是提供一个整体方案，并给出这个方案涉及的各种原则。我们认为不会有一刀切的解决方案。本书所述的基本内容可以广泛应用于各种软件项目，包括大的，小的、高技术要求或短平快的快速收益项目。
- 关注点更多的是通过更好的可视化和更快的反馈改善写作。
- 每一章都相对独立，可以分开阅读。（建议第一章必读）

> 精益软件开发运动告诉我们，“整体优化是非常重要的”

### 内容简介

- 可以从不同的地方开始阅读
- 三个部分：1-4章，讲述有规律、可重复、低风险发布的基本原则和与其相关的实践。5-10章，讲述部署流水线。11章开始，深入分析支撑持续交付的生态系统。
- 第1章必读。其他部分

#### 第一部分——基础篇

- 描述了理解部署流水线的前提条件。每一章建立在上一章的基础上。
- 第1~4章
- 第1章首先描述了在很多软件开发团队常见的反模式，然后阐述了我们的目标以及实现方式。最后总结了软件交付的一些原则，本书的其他内容都以这些原则为基础。

#### 第二部分——部署流水线

- 详细介绍部署流水线，包括如何实现部署流水线的各种阶段。
- 第五章~第10章

#### 第三部分——交付生态圈

- 讨论了用于支撑部署流水线的各类交叉实践与技术

### 第一章 软件交付的问题

#### 引言
- **本章要解决的问题**：如果有人想到了一个好点子，我们如何以最快的速度将它交付给用户？
- 专注于构建、部署、测试和发布过程
- 本书的中心模式是部署流水线。从本质上讲，部署流水线就是指一个应用程序从构建、部署、测试到发布这整个过程的自动化实现。部署流水线的实现对于每个组织都将是不同的，这取决于他们对软件发布的价值流的定义，但其背后的原则是相同的。
- 部署流水线的目标有三个。首先，它让软件构建、部署、测试和发布过程对所有人可见，促进了合作。其次，它改善了反馈，以便在整个过程中，我们能够更早地发现并解决问题。最后，它使团队能够通过一个完全自动化的过程在任意环境上部署和发布软件的任意版本。
![一个简单的部署流水线](https://wx1.sinaimg.cn/mw690/733866e8ly1g0d2dperpgj20vk08rq5e.jpg)

#### 一些常见的发布反模式

下面列出了几种与可靠的发布过程相对应的几种常见的反模式

##### 反模式：手工部署软件
- 部署应用程序所需的步骤是独立的原子性操作，由某个人或某个小组来分别执行。特征是需要详细部署文档；手工测试；频繁出错；发布时间长（超过几分钟）；发布结果不可预测；发布人压力大。
- 对于那些负责将应用程序部署到开发环境、测试环境或生产环境的人来说，应该只需要做两件事：(1)挑选版本及需要部署的环境，(2)按一下“部署”按钮。对于套装软件的发布来说，还应该有一个创建安装程序的自动化过程。
- 为什么把自动化部署看做是一个必不可少的目标：
  - 每次手工部署时都会发生错误
  - 既不可重复也不可靠
  - 手动的流程不得不写进文档
  - 自动部署本质上是鼓励协作的
  - 手工部署依赖于部署专家
  - 手工部署枯燥且极具重复性，但仍然需要有相当程度的专业知识
  - 手工部署过程进行测试的唯一手段是重新做一次
  - 每个人都应该使用自动化部署，而且它应该是软件部署的唯一方式

##### 反模式：开发完成之后才向类生产环境部署
- 应将测试、部署和发布活动也纳入到开发过程中，让他们成为开发流程正常的一部分。

##### 反模式：生产环境的手工配置管理
- 本书的关键实践之一就是配置管理，其责任之一就是让你能够重复地创建那些你开发的应用程序所依赖的每个基础设施。这意味着操作系统、补丁级别、操作系统配置、应用程序所依赖的其他软件及其配置、基础设施的配置等都应该处于受控状态。
